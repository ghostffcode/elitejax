{"version":3,"sources":["webpack:///webpack/bootstrap 1e627cfe15ca2a96f0ee","webpack:///./src/index.es6"],"names":["Elitejax","config","window","callback","ajaxForm","getEl","name","defaultConfig","async","cType","resType","data","console","log","prop","undefined","res","elem","document","querySelectorAll","Array","from","forEach","val","getAttribute","push","formEl","num","length","i","valid","validInput","inputEl","toLowerCase","value","ex","obj","cbName","str","key","xml","parseXml","DOMParser","xmlStr","parseFromString","ActiveXObject","xmlDoc","loadXML","el","v","addEventListener","e","preventDefault","target","action","method","toUpperCase","getElVal","elements","ajaxIt","configure","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","response","responseText","JSON","parse","xmlParser","open","params","setRequestHeader","send","script","createElement","type","Date","now","src","getElementsByTagName","appendChild","ej","elitejax"],"mappings":"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","file":"elitejax.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1e627cfe15ca2a96f0ee\n **/","'use strict';\n\nclass Elitejax {\n  // get config via object for elitejax constructor\n  constructor () {\n    this.config = {};\n    window.callback = {}; // add callback object to window\n    this.ajaxForm(this.getEl());\n  }\n\n  // function to add configurations to selected forms\n  configure (name, config = {}) {\n    // set default configuration\n    const defaultConfig = {\n      async: true,\n      cType: 'application/json',\n      resType: 'json',\n      callback: function (data) {\n        console.log(data);\n      }\n    };\n\n    for (let prop in defaultConfig) {\n      if (config[prop] === undefined) {\n        config[prop] = defaultConfig[prop];\n      }\n    }\n\n    this.config[name] = config;\n    return this.config[name];\n  }\n\n  // gets elements that has been marked for elitejax\n  getEl () {\n    const res = [];\n    const elem = document.querySelectorAll('form');\n    Array.from(elem).forEach((val) => {\n      if (val.getAttribute('data-elitejax') !== null) {\n        res.push(val);\n      }\n    });\n    return res;\n  }\n\n  // gets value from form elements\n  getElVal (formEl) {\n    const res = {};\n    const num = formEl.length;\n    for (let i = 0; i < num; i++) {\n      const valid = this.validInput(formEl[i]);\n      if (valid[0]) {\n        res[valid[1]] = valid[2];\n      }\n    }\n    return res;\n  }\n\n  // validate user inputs according to input types\n  validInput (inputEl) {\n    const val = [true, '', ''];\n    const name = inputEl.name.toLowerCase();\n    const value = inputEl.value;\n    const ex = inputEl.getAttribute('data-elitejax-x');\n    if (name !== '' && value !== '' && name !== 'submit' && value !== 'submit' && ex === null) {\n      val[1] = name;\n      val[2] = value;\n    } else {\n      val[0] = false;\n    }\n    return val;\n  }\n\n  // convert object to url parameter\n  params (obj = {}, resType = '', cbName = '') {\n    var str = '';\n    str = (resType === 'jsonp') ? `?${str}callback=${cbName}` : str;\n    for (var key in obj) {\n        if (str !== '') {\n            str += '&';\n        }\n        str += `${key}=${obj[key]}`;\n    }\n    return str;\n  }\n\n  xmlParser(xml) {\n    let parseXml = null;\n    if (window.DOMParser) {\n      parseXml = function(xmlStr) {\n        return (new window.DOMParser()).parseFromString(xmlStr, 'text/xml');\n      };\n    } else if (typeof window.ActiveXObject !== undefined && new window.ActiveXObject('Microsoft.XMLDOM')) {\n      parseXml = function(xmlStr) {\n        var xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM');\n        xmlDoc.async = 'false';\n        xmlDoc.loadXML(xmlStr);\n        return xmlDoc;\n      };\n    } else {\n      parseXml = function() { return null; };\n    }\n\n    return parseXml(xml);\n  }\n\n  ajaxForm (el) {\n    // Loop through all the elements\n    el.forEach((v, i) => {\n      // add on {listen} event listener to all of them\n      v.addEventListener('submit', (e) => {\n        e.preventDefault(); // stop submission\n        let name = e.target.getAttribute('name');\n        let action = e.target.getAttribute('action');\n        let method = e.target.getAttribute('method').toUpperCase();\n        let data = this.getElVal(e.target.elements); // data for ajax\n        // build complete configuration\n        this.ajaxIt(action, method, data, name);\n      });\n    });\n  }\n\n  ajaxIt (action, method, data, name = null) {\n    if (this.config[name] === undefined || this.config[name] === null) {\n      this.configure(name);\n    }\n    // destructure configuration for given form\n    var { async, cType, resType, callback } = this.config[name];\n    // get AJAX ready\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n      if (this.readyState === 4 && this.status === 200) {\n        let response = this.responseText;\n        if (resType === 'json') {\n          response = JSON.parse(response);\n          callback(response);\n        } else if (resType === 'xml') {\n          response = this.xmlParser(response);\n          callback(response);\n        } else {\n          callback(response);\n        }\n      }\n    };\n    // make request\n    if (method === 'GET' && resType !== 'jsonp') {\n      xhttp.open(method, action + '?' + this.params(data), async);\n      xhttp.setRequestHeader('Content-type', cType);\n      xhttp.send();\n    } else if (method === 'GET' && resType === 'jsonp') {\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      // create random callback name\n      const cbName = `ej_${Date.now()}`;\n      // create add callback function to global callback object\n      window.callback[cbName] = callback;\n      // send data and callback function name to be added as parameters\n      script.src = action + this.params(data, resType, `callback.${cbName}`);\n      document.getElementsByTagName('head')[0].appendChild(script);\n    } else {\n      xhttp.open(method, action, async);\n      xhttp.setRequestHeader('Content-type', cType);\n      xhttp.send(this.params(data));\n    }\n  }\n\n}\n\nlet ej = () => {\n  return new Elitejax();\n};\n\n// make module available to browser\nwindow.ej = window.elitejax = ej();\n\n// call our class instanciator, whatever the name is\nej;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.es6\n **/"],"sourceRoot":""}