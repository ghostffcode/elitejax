{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f46b0b4b42ba787266f0","webpack:///./src/index.es6"],"names":["Elitejax","config","window","ajaxForm","getEl","name","defaultConfig","async","cType","resType","callback","data","console","log","prop","undefined","res","elem","document","querySelectorAll","Array","from","forEach","val","getAttribute","push","formEl","num","length","i","valid","validInput","inputEl","toLowerCase","value","ex","obj","cbName","str","key","xml","parseXml","DOMParser","xmlStr","parseFromString","ActiveXObject","xmlDoc","loadXML","el","v","addEventListener","e","preventDefault","target","action","method","getElVal","elements","ajaxIt","toUpperCase","configure","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","response","responseText","JSON","parse","xmlParser","open","params","setRequestHeader","send","script","createElement","type","Date","now","src","getElementsByTagName","appendChild","ej","exports","module"],"mappings":"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","file":"elitejax.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"elitejax\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"elitejax\"] = factory();\n\telse\n\t\troot[\"elitejax\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f46b0b4b42ba787266f0\n **/","'use strict';\n\nclass Elitejax {\n  // get config via object for elitejax constructor\n  constructor () {\n    this.config = {};\n    // window.callback = {}; // add callback object to window\n    if (window) {\n      this.ajaxForm(this.getEl());\n    }\n  }\n\n  // function to add configurations to selected forms\n  configure (name, config = {}) {\n    // set default configuration\n    const defaultConfig = {\n      async: true,\n      cType: 'application/json',\n      resType: 'json',\n      callback: function (data) {\n        console.log(data);\n      }\n    };\n\n    for (let prop in defaultConfig) {\n      if (config[prop] === undefined) {\n        config[prop] = defaultConfig[prop];\n      }\n    }\n\n    this.config[name] = config;\n    return this.config[name];\n  }\n\n  // gets elements that has been marked for elitejax\n  getEl () {\n    const res = [];\n    const elem = document.querySelectorAll('form');\n    Array.from(elem).forEach((val) => {\n      if (val.getAttribute('data-elitejax') !== null) {\n        res.push(val);\n      }\n    });\n    return res;\n  }\n\n  // gets value from form elements\n  getElVal (formEl) {\n    const res = {};\n    const num = formEl.length;\n    for (let i = 0; i < num; i++) {\n      const valid = this.validInput(formEl[i]);\n      if (valid[0]) {\n        res[valid[1]] = valid[2];\n      }\n    }\n    return res;\n  }\n\n  // validate user inputs according to input types\n  validInput (inputEl) {\n    const val = [true, '', ''];\n    const name = inputEl.name.toLowerCase();\n    const value = inputEl.value;\n    const ex = inputEl.getAttribute('data-elitejax-x');\n    if (name !== '' && value !== '' && name !== 'submit' && value !== 'submit' && ex === null) {\n      val[1] = name;\n      val[2] = value;\n    } else {\n      val[0] = false;\n    }\n    return val;\n  }\n\n  // convert object to url parameter\n  params (obj = {}, resType = '', cbName = '') {\n    var str = '';\n    str = (resType === 'jsonp') ? `?${str}callback=${cbName}` : str;\n    for (var key in obj) {\n        if (str !== '') {\n            str += '&';\n        }\n        str += `${key}=${obj[key]}`;\n    }\n    return str;\n  }\n\n  xmlParser(xml) {\n    let parseXml = null;\n    if (window.DOMParser) {\n      parseXml = function(xmlStr) {\n        return (new window.DOMParser()).parseFromString(xmlStr, 'text/xml');\n      };\n    } else if (typeof window.ActiveXObject !== undefined && new window.ActiveXObject('Microsoft.XMLDOM')) {\n      parseXml = function(xmlStr) {\n        var xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM');\n        xmlDoc.async = 'false';\n        xmlDoc.loadXML(xmlStr);\n        return xmlDoc;\n      };\n    } else {\n      parseXml = function() { return null; };\n    }\n\n    return parseXml(xml);\n  }\n\n  ajaxForm (el) {\n    // Loop through all the elements\n    el.forEach((v, i) => {\n      // add on {listen} event listener to all of them\n      v.addEventListener('submit', (e) => {\n        e.preventDefault(); // stop submission\n        let name = e.target.getAttribute('name');\n        let action = e.target.getAttribute('action');\n        let method = e.target.getAttribute('method');\n        let data = this.getElVal(e.target.elements); // data for ajax\n        // build complete configuration\n        this.ajaxIt(action, method, data, name);\n      });\n    });\n  }\n\n  ajaxIt (action, method, data, name = null) {\n    method = method.toUpperCase();\n    if (this.config[name] === undefined || this.config[name] === null) {\n      this.configure(name);\n    }\n    // destructure configuration for given form\n    var { async, cType, resType, callback } = this.config[name];\n    // get AJAX ready\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n      if (this.readyState === 4 && this.status === 200) {\n        let response = this.responseText;\n        if (resType === 'json') {\n          response = JSON.parse(response);\n          callback(response);\n        } else if (resType === 'xml') {\n          response = this.xmlParser(response);\n          callback(response);\n        } else {\n          callback(response);\n        }\n      }\n    };\n    // make request\n    if (method === 'GET' && resType !== 'jsonp') {\n      xhttp.open(method, action + '?' + this.params(data), async);\n      xhttp.setRequestHeader('Content-type', cType);\n      xhttp.send();\n    } else if (method === 'GET' && resType === 'jsonp') {\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      // create random callback name\n      const cbName = `ej_${Date.now()}`;\n      // create add callback function to global callback object\n      this.callback[cbName] = callback;\n      // send data and callback function name to be added as parameters\n      script.src = action + this.params(data, resType, `elitejax.callback.${cbName}`);\n      document.getElementsByTagName('head')[0].appendChild(script);\n    } else {\n      xhttp.open(method, action, async);\n      xhttp.setRequestHeader('Content-type', cType);\n      xhttp.send(this.params(data));\n    }\n  }\n\n}\n\nlet ej = () => {\n  let ej = new Elitejax();\n  ej.callback = {};\n  return ej;\n};\n\n(function (exports) {\n   module.exports = ej();\n})(typeof exports === 'undefined' ? this['elitejax'] = {} : exports);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.es6\n **/"],"sourceRoot":""}